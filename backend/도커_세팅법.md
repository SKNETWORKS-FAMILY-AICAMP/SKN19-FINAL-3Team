# ğŸ³ [ë°°í¬ ë§¤ë‰´ì–¼] ì„œë²„ë³„ ë„ì»¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ê°€ì´ë“œ

ë³¸ ë¬¸ì„œëŠ” íŒ€ì›ë“¤ì´ **AI ì„œë²„**ì™€ **API ì„œë²„**ë¥¼ ê°ê°ì˜ ì—­í• ì— ë§ì¶° ë…ë¦½ì ìœ¼ë¡œ ë°°í¬í•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•œ ë§¤ë‰´ì–¼ì…ë‹ˆë‹¤.

---

## ğŸ“‹ ê°œìš” (Architecture)
ìš°ë¦¬ ì„œë¹„ìŠ¤ëŠ” ë‘ ê°œì˜ ë…ë¦½ì ì¸ ë„ì»¤ ê·¸ë£¹ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.

1.  **AI Server Group** (ì—°ì‚° ë‹´ë‹¹)
    *   `ajc_worker`: AI ëª¨ë¸ì„ ë¡œë“œí•˜ê³  ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì›Œì»¤
    *   `ajc_redis`: ì‘ì—… ë©”ì‹œì§€ë¥¼ ì¤‘ê°œí•˜ëŠ” í (**AI Serverì— í¬í•¨ë˜ì–´ ë°°í¬ë¨**)

2.  **API Server Group** (Interface ë‹´ë‹¹)
    *   `ajc_api`: í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë°›ëŠ” ì›¹ ì„œë²„

---

## ğŸš€ 1. AI Server (+Redis) ë°°í¬ ë° ì‹¤í–‰
AI ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤. Redisê°€ í•¨ê»˜ ì‹¤í–‰ë©ë‹ˆë‹¤.

### 1) ì‹¤í–‰ ëª…ë ¹ì–´
í„°ë¯¸ë„ì—ì„œ `backend` í´ë”ë¡œ ì´ë™ í›„ ì‹¤í–‰í•˜ì„¸ìš”.

```bash
# AI Workerì™€ Redisë§Œ ì‹¤í–‰ (ë¹Œë“œ í¬í•¨)
docker-compose up -d --build backend-ai redis
```

### 2) ë¡œê·¸ í™•ì¸
AI ëª¨ë¸ ë¡œë”© ë“± ë¬´ê±°ìš´ ì‘ì—…ì´ ì§„í–‰ë˜ë¯€ë¡œ ë¡œê·¸ë¥¼ ê¼­ í™•ì¸í•˜ì„¸ìš”.

```bash
docker-compose logs -f backend-ai
```

---

## ğŸŒ 2. API Server ë°°í¬ ë° ì‹¤í–‰
ì›¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.
> **ì£¼ì˜**: API ì„œë²„ëŠ” Redisì— ì—°ê²°í•´ì•¼ í•˜ë¯€ë¡œ, **AI Server(Redis)ê°€ ë¨¼ì € ì¼œì ¸ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.** (ê°™ì€ ë„¤íŠ¸ì›Œí¬ ë‚´)

### 1) ì‹¤í–‰ ëª…ë ¹ì–´
í„°ë¯¸ë„ì—ì„œ `backend` í´ë”ë¡œ ì´ë™ í›„ ì‹¤í–‰í•˜ì„¸ìš”.

```bash
# API Serverë§Œ ì‹¤í–‰ (ë¹Œë“œ í¬í•¨)
docker-compose up -d --build backend-api
```

### 2) ë¡œê·¸ í™•ì¸
```bash
docker-compose logs -f backend-api
```

---

## ğŸ›‘ 3. ì„œë¹„ìŠ¤ ì¢…ë£Œ
ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆë¥¼ ë‚´ë¦´ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```bash
# ì „ì²´ ì¢…ë£Œ
docker-compose down

# íŠ¹ì • ì„œë²„ë§Œ ì¢…ë£Œ
docker-compose stop backend-worker
docker-compose stop backend-api
```

---

## ğŸ›  (ì°¸ê³ ) í™˜ê²½ ì„¤ì • íŒŒì¼
ë°°í¬ ì „ `.env` íŒŒì¼ì´ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

| íŒŒì¼ ìœ„ì¹˜ | ì—­í•  | ì£¼ìš” í™•ì¸ ë³€ìˆ˜ |
| :--- | :--- | :--- |
| `ai_server/.env` | AI Worker ì„¤ì • | `REDIS_HOST`, `DB_HOST` |
| `api_server/.env` | API Server ì„¤ì • | `REDIS_HOST`, `DB_HOST` |
