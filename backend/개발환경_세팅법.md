# ğŸ› ï¸ ë°±ì—”ë“œ ê°œë°œ í™˜ê²½ ì„¸íŒ… ê°€ì´ë“œ

íŒ€ì›ë“¤ì´ ê°ìì˜ PCì—ì„œ ì›í™œí•˜ê²Œ ê°œë°œ ë° ë””ë²„ê¹…í•  ìˆ˜ ìˆë„ë¡ ì „ì²´ í™˜ê²½ì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

---

## 1. Redis ì‹¤í–‰ (í•„ìˆ˜)
**Why?**: AI Serverì™€ API Serverê°€ í†µì‹ í•˜ê¸° ìœ„í•œ ë©”ì‹œì§€ í(Message Queue) ì—­í• ì„ í•©ë‹ˆë‹¤. ë¡œì»¬ ê°œë°œ ì‹œì—ë„ Redisê°€ ì¼œì ¸ ìˆì–´ì•¼ ì„œë²„ê°€ ì—ëŸ¬ ì—†ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.

(Docker Desktopì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.)

í„°ë¯¸ë„(PowerShell)ì„ ì—´ê³  **`docker-compose.yml` íŒŒì¼ì´ ìˆëŠ” `backend` í´ë”**ë¡œ ì´ë™í•´ì„œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

```powershell
# 1. backend í´ë”ë¡œ ì´ë™ (í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê¸°ì¤€)
cd backend

# 2. Redis ì»¨í…Œì´ë„ˆë§Œ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰
docker-compose up -d redis

# 3. ì‹¤í–‰ í™•ì¸
docker ps
# (ajc_redis ì»¨í…Œì´ë„ˆê°€ ë³´ì—¬ì•¼ í•¨)
```
> **ğŸ’¡ Docker Desktop íŒ**: 
> `docker-compose`ë¡œ ì‹¤í–‰í•˜ë©´ **`backend`ë¼ëŠ” ê·¸ë£¹(í´ë”)** ì•ˆì— ì»¨í…Œì´ë„ˆê°€ ë¬¶ì…ë‹ˆë‹¤. 
> í¬íŠ¸(`6379`)ê°€ ì•ˆ ë³´ì¸ë‹¤ë©´, ëª©ë¡ì—ì„œ `backend` ê·¸ë£¹ ì™¼ìª½ì˜ **í™”ì‚´í‘œ(>)ë¥¼ ëˆŒëŸ¬ í¼ì³ë³´ì„¸ìš”.**
> **ì°¸ê³ **: ë§Œì•½ `docker-compose` ëŒ€ì‹  ìˆœìˆ˜ Docker ëª…ë ¹ì–´ë¡œ ë„ìš°ê³  ì‹¶ë‹¤ë©´:
> `docker run -d --name ajc_redis -p 6379:6379 redis:alpine`

---

## 2. Anaconda ê°€ìƒí™˜ê²½ ìƒì„± (ê° ì„œë²„ë³„ ë¶„ë¦¬)
**Why?**: API ì„œë²„ì™€ AI ì„œë²„ì˜ ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•˜ì—¬ ì¶©ëŒì„ ë§‰ê³ , í•„ìš”í•œ ê²ƒë§Œ ì„¤ì¹˜í•˜ì—¬ ê°€ë³ê³  ì¾Œì í•œ í™˜ê²½ì„ ìœ ì§€í•˜ê¸° ìœ„í•¨.

### A. API ì„œë²„ìš© í™˜ê²½ (`ajc_api`)
í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•˜ì„¸ìš”.

```powershell
# 1. í™˜ê²½ ìƒì„± (Python 3.11)
conda create -n ajc_api python=3.11 -y

# 2. í™œì„±í™”
conda activate ajc_api

# 3. ì˜ì¡´ì„± ì„¤ì¹˜ (ê°€ë²¼ì›€ - FastAPI ë“±)
cd backend/api_server
pip install -r requirements.txt
```

### B. AI ì„œë²„ìš© í™˜ê²½ (`ajc_ai`)
AI ê´€ë ¨ ë¬´ê±°ìš´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì—¬ê¸°ì—ë§Œ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```powershell
# 1. í™˜ê²½ ìƒì„± (Python 3.11)
conda create -n ajc_ai python=3.11 -y

# 2. í™œì„±í™”
conda activate ajc_ai

# 3. ì˜ì¡´ì„± ì„¤ì¹˜ (ë¬´ê±°ì›€ - PyTorch, LlamaIndex ë“±)
cd backend/ai_server
pip install -r requirements.txt
```

---

## 3. VS Code íŒŒì´ì¬ ê²½ë¡œ ì¸ì‹ ì„¤ì •
**Why?**: VS Codeê°€ `common` ê°™ì€ ê³µí†µ í´ë”ì˜ ì½”ë“œë¥¼ ì¸ì‹í•˜ê²Œ í•˜ì—¬, **ë¹¨ê°„ ì¤„(Import Error)ì„ ì—†ì• ê³  ìë™ì™„ì„±** ê¸°ëŠ¥ì„ ì“°ê¸° ìœ„í•¨.

í”„ë¡œì íŠ¸ ìµœìƒìœ„ í´ë”ì˜ `.vscode/settings.json` íŒŒì¼ì„ ì—´ê³ (ì—†ìœ¼ë©´ ìƒì„±) ì•„ë˜ ë‚´ìš©ì„ ë„£ìœ¼ì„¸ìš”.

```json
{
    "python.analysis.extraPaths": [
        "./backend",
        "./backend/common",
        "./backend/api_server",
        "./backend/ai_server"
    ]
}
```

---

## 4. ë””ë²„ê±° ì‹¤í–‰ ì„¤ì • (`launch.json`)
**Why?**: ë§¤ë²ˆ í„°ë¯¸ë„ì— ê¸´ ëª…ë ¹ì–´ë¥¼ ì¹˜ì§€ ì•Šê³ , **ë²„íŠ¼ í´ë¦­(F5) í•œ ë²ˆìœ¼ë¡œ ì„œë²„ë¥¼ ì‹¤í–‰**í•˜ê³  **ì¤‘ë‹¨ì (Breakpoint)**ì„ ì°ì–´ ì½”ë“œë¥¼ ë¶„ì„í•˜ê¸° ìœ„í•¨.

`.vscode/launch.json` íŒŒì¼ì„ ì—´ê³  ì•„ë˜ ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.

> **âš ï¸ í•„ë…**: `"python"` í•­ëª©ì˜ ê²½ë¡œëŠ” **ë°˜ë“œì‹œ ë³¸ì¸ì˜ PC conda ê²½ë¡œ**ì— ë§ê²Œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤! 
> (í„°ë¯¸ë„ì—ì„œ `conda env list` ì…ë ¥ ì‹œ í™•ì¸ ê°€ëŠ¥)

```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Backend (API)", // ë””ë²„ê±° ëª©ë¡ì— í‘œì‹œë  ì´ë¦„
            "type": "debugpy", // Python ë””ë²„ê¹… ìµìŠ¤í…ì…˜ ì‚¬ìš©
            "request": "launch", // ìƒˆ í”„ë¡œì„¸ìŠ¤ ì‹œì‘
            // ğŸ‘‡ ë³¸ì¸ì˜ ajc_api í™˜ê²½ ê²½ë¡œë¡œ ìˆ˜ì • í•„ìˆ˜
            "python": "C:/Users/{ì‚¬ìš©ìëª…}/anaconda3/envs/ajc_api/python.exe",
            "module": "uvicorn", // 'python -m uvicorn' ëª…ë ¹ì–´ë¡œ ì‹¤í–‰
            "args": [ // FastAPI ì‹¤í–‰ ì˜µì…˜
                "app.main:app",
                "--host", "0.0.0.0",
                "--port", "8000",
                "--reload" // ì½”ë“œ ë³€ê²½ ì‹œ ìë™ ì¬ì‹œì‘
            ],
            "cwd": "${workspaceFolder}/backend/api_server", // ì‹¤í–‰ ìœ„ì¹˜ (api_server í´ë”)
            "env": {
                // ëª¨ë“ˆ import ê²½ë¡œ(common í´ë” ì¸ì‹) ë° ì¸ì½”ë”© ì„¤ì •
                "PYTHONPATH": "${workspaceFolder}/backend;${workspaceFolder}/backend/api_server",
                "PYTHONIOENCODING": "utf-8"
             },
            "envFile": "${workspaceFolder}/backend/api_server/.env", // .env íŒŒì¼ ë¡œë“œ
            "console": "integratedTerminal", // VS Code í„°ë¯¸ë„ ì‚¬ìš© (ë¡œê·¸ ìƒ‰ìƒ ì§€ì›)
            "presentation": { "group": "backend" } // í„°ë¯¸ë„ íŒ¨ë„ ê·¸ë£¹í•‘
        },
        {
            "name": "AI Worker",
            "type": "debugpy",
            "request": "launch",
             // ğŸ‘‡ ë³¸ì¸ì˜ ajc_ai í™˜ê²½ ê²½ë¡œë¡œ ìˆ˜ì • í•„ìˆ˜
            "python": "C:/Users/{ì‚¬ìš©ìëª…}/anaconda3/envs/ajc_ai/python.exe",
            "module": "app.worker", // 'python -m app.worker' ì‹¤í–‰
            "cwd": "${workspaceFolder}/backend/ai_server", // ì‹¤í–‰ ìœ„ì¹˜ (ai_server í´ë”)
            "env": {
                "PYTHONPATH": "${workspaceFolder}/backend;${workspaceFolder}/backend/ai_server",
                "PYTHONIOENCODING": "utf-8"
            },
            "envFile": "${workspaceFolder}/backend/ai_server/.env",
            "console": "integratedTerminal",
            "presentation": { "group": "worker" }
        }
    ],
    "compounds": [
        {
            "name": "ğŸš€ Backend + Worker ë™ì‹œ ì‹¤í–‰", // ë™ì‹œ ì‹¤í–‰ í”„ë¡œí•„ ì´ë¦„
            "configurations": ["Backend (API)", "AI Worker"], // ê°™ì´ ì‹¤í–‰í•  ì„¤ì •ë“¤
            "stopAll": true // í•˜ë‚˜ë¥¼ ë„ë©´ ë‚˜ë¨¸ì§€ë„ ê°™ì´ ì¢…ë£Œ
        }
    ]
}
```

---

## 5. ì‹¤í–‰ ë°©ë²• (ê°œë°œ ì‹œì‘)
**Why?**: API ì„œë²„ì™€ AI ì„œë²„ê°€ ì—°ë™ë˜ì–´ ì‘ë™í•˜ë¯€ë¡œ, **ë‘ ì„œë²„ë¥¼ ë™ì‹œì— ì¼œì„œ í†µí•© í…ŒìŠ¤íŠ¸**ë¥¼ í•˜ê¸° ìœ„í•¨.

1. **Redis ì‹¤í–‰ í™•ì¸**: `docker ps`ë¡œ redisê°€ ì¼œì ¸ ìˆëŠ”ì§€ ë¨¼ì € í™•ì¸.
2. VS Code ì¢Œì¸¡ ë©”ë‰´ë°”ì—ì„œ **'Run and Debug'** ì•„ì´ì½˜(ë²Œë ˆì™€ ì‹¤í–‰ ì•„ì´ì½˜) í´ë¦­. (ë‹¨ì¶•í‚¤: `Ctrl+Shift+D`)
3. ìƒë‹¨ ë“œë¡­ë‹¤ìš´ ëª©ë¡ì—ì„œ **`ğŸš€ Backend + Worker ë™ì‹œ ì‹¤í–‰`** ì„ íƒ.
4. **ì´ˆë¡ìƒ‰ ì¬ìƒ ë²„íŠ¼(â–¶)** í´ë¦­.
5. í•˜ë‹¨ í„°ë¯¸ë„ ì°½ì´ ê°ˆë¼ì§€ë©° **Backend**ì™€ **Worker**ê°€ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸.
